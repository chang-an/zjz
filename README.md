# 证件照换底色工具

一个基于Web的证件照背景颜色更换工具，使用纯JavaScript实现，无需安装任何依赖。

## 功能特点

- 🖼️ 支持JPG、PNG等常见图片格式
- 🎨 可自定义背景颜色
- ⚙️ 可调节容差参数，精确控制背景去除程度
- 🔄 边缘平滑处理，避免锯齿效果
- 💾 支持下载处理后的照片
- 📱 响应式设计，支持移动端使用
- 🧠 智能背景检测，避免误判人脸等主体内容
- 🎯 多种检测模式，适应不同图片类型

## 使用方法

1. **打开应用**
   - 直接在浏览器中打开 `index.html` 文件
   - 或者使用本地服务器（推荐）

2. **上传照片**
   - 点击"选择照片"按钮
   - 选择您的证件照（建议尺寸：413x626像素）

3. **调整参数**
   - **背景颜色**：选择您想要的背景颜色
   - **检测模式**：选择适合的检测算法
   - **容差**：数值越大，去除的背景越多（0-100）
   - **模糊半径**：用于边缘平滑处理（0-10）

4. **测试背景检测**
   - 点击"测试背景检测"按钮查看背景识别效果
   - 红色区域表示检测到的背景区域
   - 如果检测不准确，请调整容差参数

5. **处理照片**
   - 点击"处理照片"按钮
   - 等待处理完成

6. **下载结果**
   - 处理完成后点击"下载照片"按钮
   - 照片将以PNG格式保存

## 技术实现

- **前端框架**：纯HTML5 + CSS3 + JavaScript
- **图像处理**：使用Canvas API进行像素级操作
- **背景检测**：基于颜色差异的智能背景识别
- **边缘处理**：高斯模糊算法优化边缘效果

## 算法原理

1. **背景检测**：计算每个像素与白色背景的颜色差异
2. **掩码生成**：根据容差参数生成背景掩码
3. **边缘平滑**：应用模糊算法优化边缘过渡
4. **颜色替换**：将检测到的背景区域替换为目标颜色

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 本地运行

由于浏览器安全限制，建议使用本地服务器运行：

```bash
# 使用Python（如果已安装）
python -m http.server 8000

# 使用Node.js（如果已安装）
npx http-server

# 使用PHP（如果已安装）
php -S localhost:8000
```

然后在浏览器中访问 `http://localhost:8000`

## 注意事项

- 建议使用白色背景的证件照以获得最佳效果
- 照片质量越高，处理效果越好
- 处理大尺寸图片可能需要较长时间
- 建议在Chrome浏览器中使用以获得最佳性能

## 检测模式使用建议

### 智能检测模式
- **适用场景**：大多数证件照，特别是白色或浅色背景
- **优势**：自动识别主体内容，避免误判人脸
- **建议**：首次使用推荐选择此模式

### 边缘检测模式
- **适用场景**：背景复杂或主体内容较多的照片
- **优势**：只处理边缘背景，保护主体内容
- **建议**：如果智能检测误判了主体内容，可以尝试此模式

### 纯色检测模式
- **适用场景**：背景颜色单一且与主体对比明显的照片
- **优势**：处理速度快，适合批量处理
- **建议**：适合简单背景的证件照

## 参数调整建议

### 检测模式选择
- **智能检测（推荐）**：结合边缘检测和区域生长，适合大多数证件照
- **边缘检测模式**：更保守的检测，只处理图像边缘附近的背景
- **纯色检测模式**：传统的基于颜色的检测，适合简单背景

### 容差参数
- **0-20**：适合纯白色背景，精确去除
- **20-40**：适合浅色背景，平衡效果
- **40-60**：适合复杂背景，去除更多区域
- **60+**：谨慎使用，可能影响主体内容

### 模糊半径
- **0-2**：保持边缘清晰
- **3-5**：适度平滑边缘
- **6-10**：高度平滑，适合复杂边缘

### 背景颜色选择
- 选择与原始背景对比度高的颜色
- 避免选择与主体内容相似的颜色
- 建议使用标准证件照背景色（如蓝色、红色等）

## 许可证

MIT License - 可自由使用和修改
